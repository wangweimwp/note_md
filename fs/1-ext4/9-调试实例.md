# 开启内核调试打印

## ext4调试开启

```patch
Index: kernel/kernel_sdk/fs/ext4/ext4.h
===================================================================
--- kernel/kernel_sdk/fs/ext4/ext4.h    (revision 6525770)
+++ kernel/kernel_sdk/fs/ext4/ext4.h    (working copy)
@@ -77,7 +77,7 @@
 /*
  * Turn on EXT_DEBUG to get lots of info about extents operations.
  */
-#define EXT_DEBUG__
+#define EXT_DEBUG
 #ifdef EXT_DEBUG
 #define ext_debug(fmt, ...)    printk(fmt, ##__VA_ARGS__)
 #else



Index: kernel/kernel_sdk/include/linux/jbd2.h
===================================================================
--- kernel/kernel_sdk/include/linux/jbd2.h      (revision 6520576)
+++ kernel/kernel_sdk/include/linux/jbd2.h      (working copy)
@@ -1524,9 +1524,9 @@
 #define buffer_trace_init(bh)  do {} while (0)
 #define print_buffer_fields(bh)        do {} while (0)
 #define print_buffer_trace(bh) do {} while (0)
-#define BUFFER_TRACE(bh, info) do {} while (0)
+#define BUFFER_TRACE(bh, info) printk("BUFFER_TRACE %x %s\n", bh, info);
 #define BUFFER_TRACE2(bh, bh2, info)   do {} while (0)
-#define JBUFFER_TRACE(jh, info)        do {} while (0)
+#define JBUFFER_TRACE(jh, info)        printk("JBUFFER_TRACE %x %s\n", jh, info);

 #endif /* __KERNEL__ */



```

开启内核配置`CONFIG_EXT4_DEBUG=y` `CONFIG_FTRACE=y`
`CONFIG_JBD2_DEBUG=y`

